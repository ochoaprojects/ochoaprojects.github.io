<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Plex Automation" /><meta property="og:locale" content="en" /><meta name="description" content="How to build a complete Plex server with full automation for accepting and processing plex requests without any manual work." /><meta property="og:description" content="How to build a complete Plex server with full automation for accepting and processing plex requests without any manual work." /><link rel="canonical" href="https://ochoaprojects.github.io/posts/PlexAutomation/" /><meta property="og:url" content="https://ochoaprojects.github.io/posts/PlexAutomation/" /><meta property="og:site_name" content="OchoaProjects" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-07-06T10:00:00-07:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Plex Automation" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-02-28T17:03:25-08:00","datePublished":"2022-07-06T10:00:00-07:00","description":"How to build a complete Plex server with full automation for accepting and processing plex requests without any manual work.","headline":"Plex Automation","mainEntityOfPage":{"@type":"WebPage","@id":"https://ochoaprojects.github.io/posts/PlexAutomation/"},"url":"https://ochoaprojects.github.io/posts/PlexAutomation/"}</script><title>Plex Automation | OchoaProjects</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="OchoaProjects"><meta name="application-name" content="OchoaProjects"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/project-assets/Brandon-Ochoa-Github.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">OchoaProjects</a></div><div class="site-subtitle font-italic">A place where I post my projects and things that I am learning or working on.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/ochoaprojects" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://www.linkedin.com/in/brandon-ochoa/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://www.youtube.com/@ochoaprojects9930" aria-label="youtube" target="_blank" rel="noopener"> <i class="fab fa-youtube"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['brandon','ochoaprojects.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Plex Automation</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Plex Automation</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1657126800" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 6, 2022 </em> </span> <span> Updated <em class="" data-ts="1677632605" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Feb 28, 2023 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/ochoaprojects">Brandon Ochoa</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1519 words"> <em>8 min</em> read</span></div></div></div><div class="post-content"><p>How to build a complete Plex server with full automation for accepting and processing plex requests without any manual work.</p><h2 id="table-of-contents"><span class="mr-2">Table of Contents</span><a href="#table-of-contents" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><a href="#the-stack">The Stack</a><li><a href="#tips-for-managing-your-hard-drives">Tips for managing your hard drives</a><ul><li><a href="#optimizing-for-ratios">Optimizing for Ratios</a><li><a href="#hdd-vs-ssd">HDD vs SSD</a><li><a href="#hdd-backups-vs-redundancy">HDD Backups vs. Redundancy</a></ul><li><a href="#installing-mhddfs">Installing mhddfs</a><li><a href="#mounting-multiple-drives-as-one">Mounting Multiple Drives as One</a><li><a href="#installing-docker">Installing Docker</a><li><a href="#plex-config">Plex Config</a><li><a href="#deluge-config">Deluge Config</a><li><a href="#jackett-config">Jackett Config</a><li><a href="#sonarr--radarr-docker-config">Sonarr &amp; Radarr Docker Config</a><li><a href="#ombi-config">Ombi Config</a><li><a href="#start-it-up">Start it up!</a></ul><h1 id="the-stack">The Stack</h1><p>Here’s the stack we’ll be using. There will be a section describing the installation and configuration for each one of these.</p><p><code class="language-plaintext highlighter-rouge">Docker</code> lets us run and isolate each of our services into a container. Everything for each of these services will live in the container except the configuration files which will live on our host.</p><p><code class="language-plaintext highlighter-rouge">Plex</code> is a “client-server media player system”. There are a few alternatives, but I chose Plex here because they have a client available on nearly every platform.</p><p><code class="language-plaintext highlighter-rouge">Deluge</code> is going to act as our download client for our sonarr and radarr applications of the stack. It will be fed torrent files from jackett after it finds the best match based off criteria we will set.</p><p><code class="language-plaintext highlighter-rouge">Jackett</code> is a tool that Sonarr and Radarr use to search indexers and trackers for torrents.</p><p><code class="language-plaintext highlighter-rouge">Sonarr</code> is a tool for automating and managing your TV library. It automates the process of searching for torrents, downloading them then “moving” them to your library. It also checks RSS feeds to automatically download new shows as soon as they’re uploaded!</p><p><code class="language-plaintext highlighter-rouge">Radarr</code> Is a fork of Sonarr that does all the same stuff but for Movies.</p><p><code class="language-plaintext highlighter-rouge">Ombi</code> is a super simple web UI for sending requests to Radarr and Sonarr.</p><h1 id="tips-for-managing-your-hard-drives">Tips for managing your hard drives</h1><p>Here are some tips for how to manage your hard drives and data.</p><h2 id="optimizing-for-ratios"><span class="mr-2">Optimizing for Ratios</span><a href="#optimizing-for-ratios" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>I use private trackers to get my torrents, and this means I need to maintain a ratio. If you aren’t familiar with this term, it basically means you should be uploading as much, if not more than you download.</p><p>The best way I’ve found to do this is to mount your drives directly to the machine that handles your downloads. This means you can configure Sonarr and Radarr to create hardlinks when a torrent finishes. With this enabled, a reference to the data will exist in your media directory and in your torrent directory so Deluge can continue seeding everything you download.</p><h2 id="hdd-vs-ssd"><span class="mr-2">HDD vs SSD</span><a href="#hdd-vs-ssd" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Can also be written as Space vs. Reliability and Speed. I’m a hoarder when it comes to media now, so I go with HDDs. This means I need to worry about my drives randomly dying.</p><p><em>If you roll with SSDs, I envy you and you should skip this next section!</em></p><h2 id="hdd-backups-vs-redundancy"><span class="mr-2">HDD Backups vs. Redundancy</span><a href="#hdd-backups-vs-redundancy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>HDDs are very prone to randomly dying and you need to prepare for this. You can either set up an array of drives and use something like RAID, but you usually end up losing some space and it’s not very easy to expand. I’m building my library from scratch so I want to be able to expand the space on my server as I download more media.</p><p>So instead, I mount all of my drives and then use mhddfs to treat them as one file system, and what’s really cool is that it automatically fills up your drives in order.</p><p><em>update: I still haven’t found a good way to keep backups of this data and am actually working on a way around this now.</em></p><h1 id="installing-mhddfs">Installing mhddfs</h1><p>mhddfs contains a bug where you can occasionally run into a segfault error when mounting your drives. You’ll want to install it via the patch in this repo, but it’s a bit tricky.</p><p>The docker installation method is outdated and doesn’t run so you’ll have to install <code class="language-plaintext highlighter-rouge">fakeroot</code> and run the command from the Readme.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">-y</span> fakeroot
git clone https://github.com/vdudouyt/mhddfs-nosegfault.git ~/Downloads
<span class="nb">cd</span> ~/Downloads/mhddfs-nosegfault
fakeroot dpkg-buildpackage
</pre></table></code></div></div><p>It’ll give you trouble about signing, ignore it and install the .deb package</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>dpkg <span class="nt">-i</span> ~/Downloads/mhddfs_0.1.39+nosegfault2_amd64.deb
</pre></table></code></div></div><h1 id="mounting-multiple-drives-as-one">Mounting Multiple Drives as One</h1><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nb">mkdir</span> /mnt/hdd1
<span class="nb">mkdir</span> /mnt/hdd2
<span class="nb">mkdir</span> /mnt/media
</pre></table></code></div></div><p>To get your drives to mount on boot we have to edit your /etc/fstab file. Add the following lines at the end of your file and replace the drive IDs with your own.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>UUID=fa605d83-106e-4143-bb20-deec7461f08c /mnt/hdd1 ext4 auto,nofail,noatime,rw,user 0 0
UUID=31a25f49-0905-47b9-9f48-e6a5c3f59293 /mnt/hdd2 ext4 auto,nofail,noatime,rw,user 0 0
mhddfs#/mnt/hdd1,/mnt/hdd2 /mnt/media fuse defaults,allow_other 0 0
</pre></table></code></div></div><p>This mounts both drives on <code class="language-plaintext highlighter-rouge">/mnt/hdd1</code> and <code class="language-plaintext highlighter-rouge">/mnt/hdd2</code> and then mounts them together via <code class="language-plaintext highlighter-rouge">mhddfs</code> on <code class="language-plaintext highlighter-rouge">/mnt/media</code>. Now let’s set up our file system with a folder for torrents and a couple for our Libraries.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nb">mkdir</span> /mnt/media/torrents
<span class="nb">mkdir</span> /mnt/media/Movies
<span class="nb">mkdir</span> /mnt/media/Shows
</pre></table></code></div></div><h1 id="installing-docker">Installing Docker</h1><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt <span class="nb">install </span>docker.io
<span class="nb">sudo </span>systemctl start docker
<span class="nb">sudo </span>curl <span class="nt">-L</span> <span class="s2">"https://github.com/docker/compose/releases/download/1.25.4/docker-compose-</span><span class="si">$(</span><span class="nb">uname</span> <span class="nt">-s</span><span class="si">)</span><span class="s2">-</span><span class="si">$(</span><span class="nb">uname</span> <span class="nt">-m</span><span class="si">)</span><span class="s2">"</span> <span class="nt">-o</span> /usr/local/bin/docker-compose
<span class="nb">sudo chmod</span> +x /usr/local/bin/docker-compose
</pre></table></code></div></div><p>I also like to keep my configs in one easy place in case I want to transfer them anywhere, so let’s create a folder to hold our docker container configs and create our <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">mkdir</span> ~/docker-services
<span class="nb">touch</span> ~/docker-services/docker-compose.yml
</pre></table></code></div></div><p>And add this to your docker-compose file. We will be filling in the services in the coming steps. If you are confused on how to add the services or how your file should look, here is a good resource on docker-compose.</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nn">---</span>
<span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2"</span>
<span class="na">services</span><span class="pi">:</span>
</pre></table></code></div></div><h1 id="plex-config">Plex Config</h1><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="na">plex</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">linuxserver/plex:latest</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">plex</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">PUID=1000</span>
      <span class="pi">-</span> <span class="s">PGID=1000</span>
      <span class="pi">-</span> <span class="s">VERSION=docker</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">~/docker-services/plex/config:/config</span>
      <span class="pi">-</span> <span class="s">/mnt:/mnt</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">32400:32400</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
</pre></table></code></div></div><p>This will start your Plex server on port 32400, and add the volumes <code class="language-plaintext highlighter-rouge">/mnt</code> and <code class="language-plaintext highlighter-rouge">~/docker-services/plex/config</code> onto the container. If you are trying to move your current Plex configs over, run something like this</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">mv</span> /var/lib/plexmediaserver/<span class="k">*</span> ~/docker-services/plex/config/
</pre></table></code></div></div><p>Note that plex is looking for your config directory to contain a single directory <code class="language-plaintext highlighter-rouge">Library</code>. Look for that directory and copy it over.</p><h1 id="deluge-config">Deluge Config</h1><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="na">deluge</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">linuxserver/deluge</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">deluge</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">PUID=1000</span>
      <span class="pi">-</span> <span class="s">PGID=1000</span>
      <span class="pi">-</span> <span class="s">TZ=America/Los_Angeles</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">~/docker-services/deluge/config:/config</span>
      <span class="pi">-</span> <span class="s">/mnt/media/deluge:/mnt/media/deluge</span>
      <span class="pi">-</span> <span class="s">/mnt/media/PlexMediaLibrary:/mnt/media/PlexMediaLibrary</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">8112:8112</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
</pre></table></code></div></div><p>Notice how we mount our deluge drive on the container in the same location as the host, rather than something like <code class="language-plaintext highlighter-rouge">/downloads</code> (which is suggested over at linuxserver). This, plus the config below ensures Sonarr and Radarr send torrents to the right directory.</p><h1 id="jackett-config">Jackett Config</h1><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="na">jackett</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">linuxserver/jackett</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">jackett</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">PUID=1000</span>
      <span class="pi">-</span> <span class="s">PGID=1000</span>
      <span class="pi">-</span> <span class="s">TZ=America/Los_Angeles</span>
      <span class="pi">-</span> <span class="s">RUN_OPTS=run options here</span> <span class="c1">#optional</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">~/docker-services/jackett/config:/config</span>
      <span class="pi">-</span> <span class="s">/mnt/media/torrents/completed:/downloads</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">9117:9117</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
</pre></table></code></div></div><p>This is super basic and just boots your Jackett service on port 9117. Doesn’t need much else.</p><h1 id="sonarr--radarr-docker-config">Sonarr &amp; Radarr Docker Config</h1><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="na">sonarr</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">linuxserver/sonarr</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">sonarr</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">PUID=1000</span>
      <span class="pi">-</span> <span class="s">PGID=1000</span>
      <span class="pi">-</span> <span class="s">TZ=America/Los_Angeles</span>
      <span class="pi">-</span> <span class="s">UMASK_SET=022</span> <span class="c1">#optional</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">~/docker-services/sonarr/config:/config</span>
      <span class="pi">-</span> <span class="s">/mnt/media:/mnt/media</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">8989:8989</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
  <span class="na">radarr</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">linuxserver/radarr</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">radarr</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">PUID=1000</span>
      <span class="pi">-</span> <span class="s">PGID=1000</span>
      <span class="pi">-</span> <span class="s">TZ=America/Los_Angeles</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">~/docker-services/radarr/config:/config</span>
      <span class="pi">-</span> <span class="s">/mnt/media:/mnt/media</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">7878:7878</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
</pre></table></code></div></div><p>Make sure those <code class="language-plaintext highlighter-rouge">PUID</code> and <code class="language-plaintext highlighter-rouge">GUID</code> match the ID for your user and group… and make sure that user has read-write permissions for <code class="language-plaintext highlighter-rouge">/mnt/media</code>. Sonarr and Radarr are going to try to be creating folders and files in there when they copy or hard link files over.</p><p>If you are running into issues, check the logs of the docker container or the logs in the web UI. It should tell you exactly where it’s having trouble. Then log into the user you set it to run as an attempt the same actions. See whats going on first hand.</p><h1 id="ombi-config">Ombi Config</h1><pre><code class="language-yamml">ombi:
    image: linuxserver/ombi
    container_name: ombi
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=America/Los_Angeles
      - BASE_URL=/ombi #optional
    volumes:
      - ~/docker-services/ombi/config:/config
    ports:
      - 3579:3579
    restart: unless-stopped
</code></pre><p>This will open Ombi on port 3579 but sadly they don’t have SSL support by default. I can create a post on adding LetsEncrypt to this setup.</p><h1 id="start-it-up">Start it up!</h1><p>Run this command to boot up all your services!</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">cd</span> ~/docker-services
docker-compose up <span class="nt">-d</span>
</pre></table></code></div></div><p>You now have these services running locally. Go to their web UI’s and configure everything.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>sonarr       @ http://localhost:8989
radarr       @ http://localhost:7878
jackett      @ http://localhost:9117
transmission @ http://localhost:9091
plex         @ http://localhost:32400
</pre></table></code></div></div><p>There is some final configuration you will need to do that is out of the scope of this tutorial, but I can help if need be.</p><p>You will have to</p><ol><li>Configure Jackett with your indexers<li>Point Sonarr and Radarr to Jackett for indexers and Deluge as a download client<li>Tell Sonarr and Radarr to download Movies and Shows folders you created above<li>Tell Sonarr and Radarr to use Hardlinks instead of Copies in advanced settings<li>Configure Ombi to use Sonarr and Radarr for requests</ol><p>Now go invite your friends to your Plex server</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/homelab/'>Homelab</a>, <a href='/categories/plex/'>Plex</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/docker/" class="post-tag no-text-decoration" >docker</a> <a href="/tags/containers/" class="post-tag no-text-decoration" >containers</a> <a href="/tags/webui/" class="post-tag no-text-decoration" >webui</a> <a href="/tags/management/" class="post-tag no-text-decoration" >management</a> <a href="/tags/monitoring/" class="post-tag no-text-decoration" >monitoring</a> <a href="/tags/automation/" class="post-tag no-text-decoration" >automation</a> <a href="/tags/api/" class="post-tag no-text-decoration" >api</a> <a href="/tags/plex/" class="post-tag no-text-decoration" >plex</a> <a href="/tags/sonarr/" class="post-tag no-text-decoration" >sonarr</a> <a href="/tags/radarr/" class="post-tag no-text-decoration" >radarr</a> <a href="/tags/jackett/" class="post-tag no-text-decoration" >jackett</a> <a href="/tags/ombi/" class="post-tag no-text-decoration" >ombi</a> <a href="/tags/deluge/" class="post-tag no-text-decoration" >deluge</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Plex+Automation+-+OchoaProjects&url=https%3A%2F%2Fochoaprojects.github.io%2Fposts%2FPlexAutomation%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Plex+Automation+-+OchoaProjects&u=https%3A%2F%2Fochoaprojects.github.io%2Fposts%2FPlexAutomation%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fochoaprojects.github.io%2Fposts%2FPlexAutomation%2F&text=Plex+Automation+-+OchoaProjects" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/ProxMoxSetupInstall/">ProxMox Setup and Installation</a><li><a href="/posts/AboutMeAndTopology/">About Me and Homelab Topology</a><li><a href="/posts/PlexAutomation/">Plex Automation</a><li><a href="/posts/ProxMoxCloudInitImage/">Create a Debian Cloud-Init Template on Proxmox</a><li><a href="/posts/ProvisionDockerWithAnsible/">Provision a Linux Server With Docker Using Ansible</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/automation/">automation</a> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/proxmox/">proxmox</a> <a class="post-tag" href="/tags/terraform/">terraform</a> <a class="post-tag" href="/tags/cloudinit/">cloudinit</a> <a class="post-tag" href="/tags/containers/">containers</a> <a class="post-tag" href="/tags/ec2/">ec2</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/PortainerDocumented/"><div class="card-body"> <em class="small" data-ts="1654621200" data-df="ll" > Jun 7, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Portainer Documented</h3><div class="text-muted small"><p> Portainer is a simple and lightweight, but powerful application that is used to provide a web management interface that you can use to perform functions on your Docker host. Table of Contents U...</p></div></div></a></div><div class="card"> <a href="/posts/ProvisionDockerWithAnsible/"><div class="card-body"> <em class="small" data-ts="1655053200" data-df="ll" > Jun 12, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Provision a Linux Server With Docker Using Ansible</h3><div class="text-muted small"><p> Using Ansible to provision remote servers with Docker and Docker-compose. Table of Contents Prerequisites Structure Files provisioning/hosts.yml provisioning/site.yml ...</p></div></div></a></div><div class="card"> <a href="/posts/TerraformWithAWS/"><div class="card-body"> <em class="small" data-ts="1656435600" data-df="ll" > Jun 28, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Automating AWS VPC and EC2 Instances using Terraform</h3><div class="text-muted small"><p> Terraform is a powerful tool that allows us to automate infrastructure in our cloud providers and much more. Using terraform to automate the building and configuration of our AWS enviornment to be ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/AboutMeAndTopology/" class="btn btn-outline-primary" prompt="Older"><p>About Me and Homelab Topology</p></a> <a href="/posts/UsingAWSLambdaWithAPIGateway/" class="btn btn-outline-primary" prompt="Newer"><p>Using AWS Lambda and API Gateway to Check URLs</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/ochoaprojects">Brandon Ochoa</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> hosted on Github</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/automation/">automation</a> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/proxmox/">proxmox</a> <a class="post-tag" href="/tags/terraform/">terraform</a> <a class="post-tag" href="/tags/cloudinit/">cloudinit</a> <a class="post-tag" href="/tags/containers/">containers</a> <a class="post-tag" href="/tags/ec2/">ec2</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
