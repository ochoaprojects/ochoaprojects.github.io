<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="ProxMox Setup and Installation" /><meta property="og:locale" content="en" /><meta name="description" content="Proxmox VE is an open-source server platform for enterprise virtualization. As a Debian-based Linux distribution, Proxmox uses a modified Ubuntu kernel to run multiple virtual machines and containers on a single server." /><meta property="og:description" content="Proxmox VE is an open-source server platform for enterprise virtualization. As a Debian-based Linux distribution, Proxmox uses a modified Ubuntu kernel to run multiple virtual machines and containers on a single server." /><link rel="canonical" href="https://ochoaprojects.github.io/posts/ProxMoxSetupInstall/" /><meta property="og:url" content="https://ochoaprojects.github.io/posts/ProxMoxSetupInstall/" /><meta property="og:site_name" content="OchoaProjects" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-07-02T10:00:00-07:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="ProxMox Setup and Installation" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-02-28T17:03:25-08:00","datePublished":"2022-07-02T10:00:00-07:00","description":"Proxmox VE is an open-source server platform for enterprise virtualization. As a Debian-based Linux distribution, Proxmox uses a modified Ubuntu kernel to run multiple virtual machines and containers on a single server.","headline":"ProxMox Setup and Installation","mainEntityOfPage":{"@type":"WebPage","@id":"https://ochoaprojects.github.io/posts/ProxMoxSetupInstall/"},"url":"https://ochoaprojects.github.io/posts/ProxMoxSetupInstall/"}</script><title>ProxMox Setup and Installation | OchoaProjects</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="OchoaProjects"><meta name="application-name" content="OchoaProjects"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/project-assets/Brandon-Ochoa-Github.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">OchoaProjects</a></div><div class="site-subtitle font-italic">A place where I post my projects and things that I am learning or working on.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/ochoaprojects" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://www.linkedin.com/in/brandon-ochoa/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://www.youtube.com/@ochoaprojects9930" aria-label="youtube" target="_blank" rel="noopener"> <i class="fab fa-youtube"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['brandon','ochoaprojects.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>ProxMox Setup and Installation</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>ProxMox Setup and Installation</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1656781200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 2, 2022 </em> </span> <span> Updated <em class="" data-ts="1677632605" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Feb 28, 2023 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/ochoaprojects">Brandon Ochoa</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1724 words"> <em>9 min</em> read</span></div></div></div><div class="post-content"><p>Proxmox VE is an open-source server platform for enterprise virtualization. As a Debian-based Linux distribution, Proxmox uses a modified Ubuntu kernel to run multiple virtual machines and containers on a single server.</p><h2 id="table-of-contents"><span class="mr-2">Table of Contents</span><a href="#table-of-contents" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><a href="#download-proxmox-iso-image">Download Proxmox ISO Image</a><li><a href="#prepare-installation-medium">Prepare Installation Medium</a><li><a href="#launch-the-proxmox-installer">Launch the Proxmox Installer</a><li><a href="#run-proxmox">Run Proxmox</a><li><a href="#removing-subscription-pop-up-on-log-in">Removing Subscription Pop-Up on Log-In</a><ul><li><a href="#one-line-command">One-Line Command</a><li><a href="#manual-commands">Manual Commands</a></ul><li><a href="#create-a-vm">Create a VM</a><li><a href="#configure-proxmox-virtual-environment">Configure Proxmox Virtual Environment</a><ul><li><a href="#start-the-vm-at-boot">Start the VM at Boot</a><li><a href="#increasedecrease-virtual-disk-size">Increase/Decrease Virtual Disk Size</a><li><a href="#enable-nat-networking-mode">Enable NAT Networking Mode</a></ul><li><a href="#bonus-enable-dark-mode">(Bonus) Enable Dark Mode!!!</a><ul><li><a href="#install">Install</a><li><a href="#uninstall">Uninstall</a></ul></ul><h1 id="download-proxmox-iso-image">Download Proxmox ISO Image</h1><p>The first step is to download the Proxmox VE ISO image.</p><p>Navigate to the official Proxmox Downloads page and select Proxmox Virtual Environment.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/proxmox-download-page.png" alt="ProxmMox Download Page" data-proofer-ignore></p><p>This takes you to the Proxmox Virtual Environment Archive that stores ISO images and official documentation. Select ISO Images to continue.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/proxmox-iso-image.png" alt="ProxMox ISO Image" data-proofer-ignore></p><p>At the time of writing, the latest version of the Proxmox VE ISO Installer is 7.1. If a newer version is available, it is listed at the top. Click Download and save the file.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/download-proxmox-iso-installer.png" alt="Download ProxMox ISO Installer" data-proofer-ignore></p><h1 id="prepare-installation-medium">Prepare Installation Medium</h1><p>Copy the Proxmox ISO image on a CD/DVD or a USB flash drive. Although both options are possible, it is assumed that most systems won’t have an optical drive.</p><p>Plug in the USB drive and copy the ISO image to the USB stick using the command line or a USB formatting utility (such as Etcher or Rufus).</p><p>If you are working on Linux, the fastest way is to create a bootable USB is to run the command:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">dd </span><span class="nv">bs</span><span class="o">=</span>1M <span class="nv">conv</span><span class="o">=</span>fdatasync <span class="k">if</span><span class="o">=</span>./proxmox-ve_<span class="k">*</span>.iso <span class="nv">of</span><span class="o">=</span>/device/nameCopied!
</pre></table></code></div></div><p>If needed, modify the file name and path in <code class="language-plaintext highlighter-rouge">if=./proxmox-ve_*.iso</code> and make sure to provide the correct USB device name in <code class="language-plaintext highlighter-rouge">of=/device/name</code>.</p><p>To find the name of your USB stick, run the following command before and after plugging in the device:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>lsblk
</pre></table></code></div></div><p>Compare the output. The additional entry in the second output is the name of the device.</p><h1 id="launch-the-proxmox-installer">Launch the Proxmox Installer</h1><p>Move to the server (machine) where you want to install Proxmox and plug in the USB device.</p><p>While the server is booting up, access the boot menu by pressing the required keyboard key(s). Most commonly, they are either Esc, F2, F10, F11, or F12.</p><p>Select the installation medium with the Proxmox ISO image and boot from it.</p><p>Next, the Proxmox VE menu appears. Select Install Proxmox VE to start the standard installation.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/proxmox-installer-menu.png" alt="ProxMox Installer Menu" data-proofer-ignore></p><p>Read and accept the EULA to continue.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/proxmox-eula.png" alt="ProxMox EULA" data-proofer-ignore></p><p>Choose the target hard disk where you want to install Proxmox. Click Options to specify additional parameters, such as the filesystem. By default, it is set to ext4.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/select-proxmox-target-hard-disk.png" alt="Select ProxMox Target Hard Disk" data-proofer-ignore></p><p>Then, set the location, time zone, and keyboard layout. The installer autodetects most of these configurations.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/configure-location-and-timezone-for-proxmox.png" alt="Configure Location and Timezone for ProxMox" data-proofer-ignore></p><p>Create a strong password for your admin credentials, retype the password to confirm, and type in an email address for system administrator notifications.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/set-administratio-password-for-proxmox.png" alt="Set Administrator Password for ProxMox" data-proofer-ignore></p><p>The final step in installing Proxmox is setting up the network configuration. Select the management interface, a hostname for the server, an available IP address, the default gateway, and a DNS server. During the installation process, use either an IPv4 or IPv6 address. To use both, modify the configuration after installing.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/network-management-configuration-for-proxmox.png" alt="Network Management Configuration for ProxMox" data-proofer-ignore></p><p>The installer summarizes the selected options. After confirming everything is in order, press Install.</p><p>After the installation is complete, remove the USB drive and reboot the system.</p><h1 id="run-proxmox">Run Proxmox</h1><p>Once the installation is completed and the system rebooted itself, the Proxmox GRUB menu loads. Select <code class="language-plaintext highlighter-rouge">Proxmox Virtual Environment GNU/Linux</code> and press <code class="language-plaintext highlighter-rouge">Enter</code>.</p><p>Next, the Proxmox VE welcome message appears. It includes an IP address which loads Proxmox. Navigate to that IP address in a web browser of your choice.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/proxmox-welcome-output.png" alt="ProxMox Welcome Output" data-proofer-ignore></p><p>After navigating to the required IP address, you will most likely see a warning message that the page is unsafe because Proxmox VE uses self-signed SSL certificates. Select to proceed to the Proxmox web management interface.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/accept-proxmox-certificate-and-proceed.png" alt="Accept ProxMox Certificate and Proceed" data-proofer-ignore></p><p>To access the interface, log in as root and provide the password set when installing Proxmox.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/proxmox-ve-login.png" alt="ProxMox VE Login" data-proofer-ignore></p><p>A dialogue box pops up saying there is no valid subscription for the server. Proxmox offers an add-on service you can subscribe to, which is optional. To ignore the message, click OK.</p><h1 id="removing-subscription-pop-up-on-log-in">Removing Subscription Pop-Up on Log-In</h1><h2 id="one-line-command"><span class="mr-2">One-Line Command</span><a href="#one-line-command" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Run this command in the terminal of the host machine running your ProxMox instance.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sed</span> <span class="nt">-Ezi</span>.bak <span class="s2">"s/(Ext.Msg.show</span><span class="se">\(\{\s</span><span class="s2">+title: gettext</span><span class="se">\(</span><span class="s2">'No valid sub)/void</span><span class="se">\(\{</span><span class="s2"> </span><span class="se">\/\/\1</span><span class="s2">/g"</span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js <span class="o">&amp;&amp;</span> systemctl restart pveproxy.service
</pre></table></code></div></div><h2 id="manual-commands"><span class="mr-2">Manual Commands</span><a href="#manual-commands" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Below is the manual process of acheiving the same results as the command above in multi-command steps.</p><p>Change to working directory</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">cd</span> /usr/share/javascript/proxmox-widget-toolkit
</pre></table></code></div></div><p>Make a backup</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">cp </span>proxmoxlib.js proxmoxlib.js.bak
</pre></table></code></div></div><p>Edit the file</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>nano proxmoxlib.js
</pre></table></code></div></div><p>Locate the following code <em>(Use ctrl+w in nano and search for “No valid subscription”)</em></p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>Ext.Msg.show({
  title: gettext('No valid subscription'),
</pre></table></code></div></div><p>Replace “Ext.Msg.show” with “void”</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>void({ //Ext.Msg.show({
  title: gettext('No valid subscription'),
</pre></table></code></div></div><p>Restart the Proxmox web service (also be sure to clear your browser cache, depending on the browser you may need to open a new tab or restart the browser)</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>systemctl restart pveproxy.service
</pre></table></code></div></div><p>You can quickly check if the change has been made:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">grep</span> <span class="nt">-n</span> <span class="nt">-B</span> 1 <span class="s1">'No valid sub'</span> proxmoxlib.js
</pre></table></code></div></div><p>You have three options to revert the changes:</p><ol><li>Manually edit proxmoxlib.js to undo the changes you made<li>Restore the backup file you created from the proxmox-widget-toolkit directory: <code class="language-plaintext highlighter-rouge">mv proxmoxlib.js.bak proxmoxlib.js</code><li>Reinstall the proxmox-widget-toolkit package from the repository: <code class="language-plaintext highlighter-rouge">apt-get install --reinstall proxmox-widget-toolkit</code></ol><h1 id="create-a-vm">Create a VM</h1><p>Now that you logged in to the Proxmox web console, create a virtual machine.</p><p>Before going through the steps to create a virtual machine, make sure you have ISO images for installation mediums. Move to the resource tree on the left side of your GUI.</p><p>Select the server you are running and click on local (pve1). Select ISO Images from the menu and choose between uploading an image or downloading it from a URL.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/upload-iso-image-on-proxmox-ve.png" alt="Upload ISO Image on ProxMox VE" data-proofer-ignore></p><p>Once you have added an ISO image, move on to spinning up a virtual machine. Click the Create VM button located on the right side of the header in the GUI.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/create-vm-in-proxmox-ve.png" alt="Create VM in ProxMox VE" data-proofer-ignore></p><p>Provide general information about the VM:</p><p>Start by selecting the Node. If you are starting and have no nodes yet, Proxmox automatically selects node 1 (pve1). Provide a VM ID. Each resource has to have a unique ID. Finally, create a name for the VM. Use an easily identifiable name.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/adding-general-information-for-proxmox-virtual-machine.png" alt="Adding General Information for ProxMox Virtual Machine" data-proofer-ignore></p><p>Next, switch to the OS tab and select the ISO image you want for your VM. Define the Type of the OS and kernel Version. Click Next to continue.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/select-os-for-proxmox-virtual-machine.png" alt="Select OS for ProxMox Virtual Machine" data-proofer-ignore></p><p>Modify system options (such as the Graphic card and SCSI controller) or leave the default settings.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/system-options-for-proxmox.png" alt="System Options for ProxMox" data-proofer-ignore></p><p>Then, configure any Hard Disk options you want the VM to have. Generally, you can leave all the default settings. However, if the physical server is using an SSD, enable the Discard option.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/hard-disk-options-for-proxmox-vm.png" alt="Hard Disk Options for ProxMox VM" data-proofer-ignore></p><p>The number of Cores the physical server has determines how many cores you can provide to the VM. The number of cores allocated also depends on the predicted workload.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/set-cpu-options-for-proxmox-virtual-machine.png" alt="Set CPU Options for ProxMox Virtual Machine" data-proofer-ignore></p><p>Next, choose how much Memory (MiB) you want to assign to the VM.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/configure-memory-for-virtual-machine.png" alt="Configure Memory for Virtual Machine" data-proofer-ignore></p><p>Move on to the Network tab. It is recommended to separate the management interface and the VM network. For now, leave the default setting.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/configure-network-options-for-vm.png" alt="Configure Network Options for VM" data-proofer-ignore></p><p>After clicking Next, Proxmox loads the Confirm tab that summarizes the selected VM options. To start the VM immediately, check the box under the listed information or start the VM manually later. Click Finish to create the VM.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/vm-summary.png" alt="VM Summary" data-proofer-ignore></p><p>See the newly created VM in the resource tree on the left side of the screen. Click on the VM to see its specifications and options.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/proxmox-virtual-machine.png" alt="ProxMox Virtaul Machine" data-proofer-ignore></p><h1 id="configure-proxmox-virtual-environment">Configure Proxmox Virtual Environment</h1><p>After creating a virtual machine, move on to configuring the environment.</p><h2 id="start-the-vm-at-boot"><span class="mr-2">Start the VM at Boot</span><a href="#start-the-vm-at-boot" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>If the Start at boot option is set to No, the VM does not automatically start after rebooting the server. This means you need to log in to the Proxmox interface and start the VM manually.</p><p>To change the default setting, highlight the option and click the Edit button above.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/change-start-at-boot-option.png" alt="Change Start at Boot Options" data-proofer-ignore></p><p>Check the box and click OK.</p><p><img data-src="/project-assets/ProxMoxSetupInstall/enable-vm-to-start-boot.png" alt="Enable VM to Start Boot" data-proofer-ignore></p><h2 id="increasedecrease-virtual-disk-size"><span class="mr-2">Increase/Decrease Virtual Disk Size</span><a href="#increasedecrease-virtual-disk-size" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The simplest way to increase or decrease the virtual disk size of a VM is through the command line interface, which can be done online or offline.</p><p>When increasing disk space, modify the partition table and file system inside the VM to update to the new size.</p><p>When decreasing a VM’s disk space, make sure to back up any data you want to save and reduce the file system and partition inside the VM first.</p><p>The main syntax for increasing/decreasing virtual disk size is:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>qm resize <span class="o">[</span>virtual_machine_ID] <span class="o">[</span>disk] <span class="o">[</span>size]Copied!
</pre></table></code></div></div><p>For instance, to add 10G to a virtio0 disk on a VM with the ID 100, run:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>qm resize 100 virtio0 +10G
</pre></table></code></div></div><h2 id="enable-nat-networking-mode"><span class="mr-2">Enable NAT Networking Mode</span><a href="#enable-nat-networking-mode" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>As mentioned above, it’s a good idea to change the default bridge networking mode to prevent the Proxmox host and VMs being on the same network. To create a separate network, enable NAT networking mode.</p><p>To do so, edit the Interfaces file. Open the command line and run:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>nano /etc/network/interfaces
</pre></table></code></div></div><p>The file shows that vmbr0 is the default bridge network for Proxmox, as in the lines below:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>auto lo
iface lo inet loopback
iface eno1 inet manual
auto vmbr0
iface vmbr0 inet static
address 10.10.22.215
netmask 255.255.255.0
gateway 10.10.22.1
bridge_ports eno1
bridge_stp off
bridge_fd 0
</pre></table></code></div></div><p>Add the following content to the file:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>auto vmbr1
iface vmbr1 inet static
address  10.10.10.1
netmask  255.255.255.0
bridge_ports none
bridge_stp off
bridge_fd 0
post-up echo 1 &gt; /proc/sys/net/ipv4/ip_forward
post-up   iptables -t nat -A POSTROUTING -s '10.10.10.0/24' -o vmbr0 -j MASQUERADE
post-down iptables -t nat -D POSTROUTING -s '10.10.10.0/24' -o vmbr0 -j MASQUERADE
</pre></table></code></div></div><p>Save and exit.</p><p>Finally, bring up the the new interface with:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>ifup vmbr1
</pre></table></code></div></div><p>Next time you create a VM, vmbr0 and vmbr1 will be available for the bridge network option. Select vmbr1 to keep the VM on a separate network from Proxmox.</p><h1 id="bonus-enable-dark-mode">(Bonus) Enable Dark Mode!!!</h1><p>Everything is dark, including the graphs, context menus and all in between! Eyes need not be fried.</p><h2 id="install"><span class="mr-2">Install</span><a href="#install" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><img data-src="/project-assets/ProxMoxSetupInstall/pve-discord-dark.png" alt="PVE Discord Dark" data-proofer-ignore></p><p>The installation is done via the CLI utility. Run the following commands on the PVE node serving the Web UI:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>~# wget https://raw.githubusercontent.com/Weilbyte/PVEDiscordDark/master/PVEDiscordDark.sh
~# bash PVEDiscordDark.sh <span class="nb">install</span>
</pre></table></code></div></div><p>Or this oneliner</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>bash &lt;<span class="o">(</span>curl <span class="nt">-s</span> https://raw.githubusercontent.com/Weilbyte/PVEDiscordDark/master/PVEDiscordDark.sh <span class="o">)</span> <span class="nb">install</span>
</pre></table></code></div></div><h2 id="uninstall"><span class="mr-2">Uninstall</span><a href="#uninstall" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>To uninstall the theme, simply run the <code class="language-plaintext highlighter-rouge">utility</code> with the uninstall command.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/homelab/'>Homelab</a>, <a href='/categories/proxmox/'>ProxMox</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/proxmox/" class="post-tag no-text-decoration" >proxmox</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=ProxMox+Setup+and+Installation+-+OchoaProjects&url=https%3A%2F%2Fochoaprojects.github.io%2Fposts%2FProxMoxSetupInstall%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=ProxMox+Setup+and+Installation+-+OchoaProjects&u=https%3A%2F%2Fochoaprojects.github.io%2Fposts%2FProxMoxSetupInstall%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fochoaprojects.github.io%2Fposts%2FProxMoxSetupInstall%2F&text=ProxMox+Setup+and+Installation+-+OchoaProjects" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/ProxMoxSetupInstall/">ProxMox Setup and Installation</a><li><a href="/posts/AboutMeAndTopology/">About Me and Homelab Topology</a><li><a href="/posts/PlexAutomation/">Plex Automation</a><li><a href="/posts/ProxMoxCloudInitImage/">Create a Debian Cloud-Init Template on Proxmox</a><li><a href="/posts/ProvisionDockerWithAnsible/">Provision a Linux Server With Docker Using Ansible</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/automation/">automation</a> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/proxmox/">proxmox</a> <a class="post-tag" href="/tags/terraform/">terraform</a> <a class="post-tag" href="/tags/cloudinit/">cloudinit</a> <a class="post-tag" href="/tags/containers/">containers</a> <a class="post-tag" href="/tags/ec2/">ec2</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/ProxMoxCloudInitImage/"><div class="card-body"> <em class="small" data-ts="1654275600" data-df="ll" > Jun 3, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Create a Debian Cloud-Init Template on Proxmox</h3><div class="text-muted small"><p> Cloud-Init is the de facto multi-distribution package that handles early initialization of a virtual machine instance. When the VM starts for the first time, the Cloud-Init software inside the VM w...</p></div></div></a></div><div class="card"> <a href="/posts/DeployingVMsWithTerraformInProxMox/"><div class="card-body"> <em class="small" data-ts="1654448400" data-df="ll" > Jun 5, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Deploying VMs With Terraform In ProxMox</h3><div class="text-muted small"><p> Leveraging our ProxMox cloud-init templates to deploy VMs entirely through Terraform quickly and easily. Table of Contents Prep a cloud-init template to use with Terraform Install qe...</p></div></div></a></div><div class="card"> <a href="/posts/PlexAutomation/"><div class="card-body"> <em class="small" data-ts="1657126800" data-df="ll" > Jul 6, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Plex Automation</h3><div class="text-muted small"><p> How to build a complete Plex server with full automation for accepting and processing plex requests without any manual work. Table of Contents The Stack Tips for managing your hard drives ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/TerraformWithAWS/" class="btn btn-outline-primary" prompt="Older"><p>Automating AWS VPC and EC2 Instances using Terraform</p></a> <a href="/posts/AboutMeAndTopology/" class="btn btn-outline-primary" prompt="Newer"><p>About Me and Homelab Topology</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/ochoaprojects">Brandon Ochoa</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> hosted on Github</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/automation/">automation</a> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/proxmox/">proxmox</a> <a class="post-tag" href="/tags/terraform/">terraform</a> <a class="post-tag" href="/tags/cloudinit/">cloudinit</a> <a class="post-tag" href="/tags/containers/">containers</a> <a class="post-tag" href="/tags/ec2/">ec2</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
